import{_ as i,c as s,o as a,a2 as e}from"./chunks/framework.CCypsxA0.js";const E=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"Implementations/see3-js/Verifying.md","filePath":"Implementations/see3-js/Verifying.md"}'),t={name:"Implementations/see3-js/Verifying.md"},n=e(`<h3 id="verify-function" tabindex="-1"><code>verify</code> Function <a class="header-anchor" href="#verify-function" aria-label="Permalink to &quot;\`verify\` Function&quot;">​</a></h3><p>Verifies the authenticity of an image file by performing a series of cryptographic checks and validations using C2PA (Content Authenticity and Provenance) standards.</p><h4 id="parameters" tabindex="-1">Parameters <a class="header-anchor" href="#parameters" aria-label="Permalink to &quot;Parameters&quot;">​</a></h4><ul><li><code>c2pa: C2pa</code> - A C2PA instance.</li><li><code>file: File</code> - The image file to be verified.</li></ul><h4 id="returns" tabindex="-1">Returns <a class="header-anchor" href="#returns" aria-label="Permalink to &quot;Returns&quot;">​</a></h4><ul><li><code>Promise&lt;VerifyResult | null&gt;</code>: A promise that resolves to the verification result or null if the verification fails. The verification result includes: <ul><li><code>trustedAuthority</code>: The identifier of the trusted authority if the verification is successful.</li><li><code>imageHash</code>: The cryptographic hash of the image.</li><li><code>editHistory</code>: An array of edits applied to the image, if any.</li></ul></li></ul><h4 id="process" tabindex="-1">Process <a class="header-anchor" href="#process" aria-label="Permalink to &quot;Process&quot;">​</a></h4><ol><li><strong>Read Manifest</strong>: Extracts the manifest store from the C2PA object.</li><li><strong>Compute Image Hash</strong>: Calculates the cryptographic hash of the image file.</li><li><strong>Top-Level Attestation Check</strong>: Searches for a top-level attestation in the manifest and verifies it if found.</li><li><strong>Trace Lineage of Edits</strong>: <ul><li>If no top-level attestation is found, it checks for equality proofs (See3EqProof) to trace the lineage of edits applied to the image.</li><li>Verifies each edit recursively by following the manifest pointers and checking the associated proofs.</li></ul></li><li><strong>Final Verification</strong>: <ul><li>Once the lineage tracing reaches the original image, it performs a final attestation check.</li><li>If all checks are passed, it constructs the verification result.</li></ul></li></ol><h4 id="detailed-steps" tabindex="-1">Detailed Steps <a class="header-anchor" href="#detailed-steps" aria-label="Permalink to &quot;Detailed Steps&quot;">​</a></h4><ol><li><strong>Setup</strong>: Initializes cryptographic modules required for verification.</li><li><strong>Attestation Verification</strong>: <ul><li>Retrieves and formats the necessary data from the attestation.</li><li>Uses cryptographic backends to verify the attestation proof.</li></ul></li><li><strong>Equality Proof Verification</strong>: <ul><li>Retrieves and formats the necessary data from the equality proof.</li><li>Verifies the proof using the appropriate cryptographic circuit.</li></ul></li><li><strong>Error Handling</strong>: Catches and logs any errors that occur during the verification process.</li></ol><h4 id="example-usage" tabindex="-1">Example Usage <a class="header-anchor" href="#example-usage" aria-label="Permalink to &quot;Example Usage&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> c2paInstance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> C2pa</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> imageFile</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> File</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;image.jpg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">verify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c2paInstance, imageFile)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (result) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Verification successful:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, result);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Verification failed.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Error during verification:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, error);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>This function is crucial for ensuring the integrity and authenticity of digital media, allowing users to verify the source and modifications made to an image, thereby helping to combat misinformation and unauthorized use.</p>`,13),l=[n];function r(h,o,p,k,c,d){return a(),s("div",null,l)}const f=i(t,[["render",r]]);export{E as __pageData,f as default};
